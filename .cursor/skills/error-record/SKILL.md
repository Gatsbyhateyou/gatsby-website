---
name: error-record
description: 在 AI 犯错并改正后，将错误总结写入当前项目的 error-record 文件夹；Markdown 按当天日期命名（YYYY-MM-DD.md），同一天多次总结则追加到同一文件。用户说「总结错误」「记录错误」「写错误总结」「犯错后要记录」或完成纠错后要留档时使用。
---

# Error Record（错误记录）

在犯错并改正后，将本次错误的总结写入当前项目根目录下的 `error-record` 文件夹，按日期归档，同一天多次使用则追加到同一文件，便于后续不再犯同样错误。

## 工作流（按顺序执行）

### 1. 确定项目根

以用户当前打开的项目/工作区根目录为准，在该根目录下操作 `error-record`。多工作区时以用户正在编辑或指定的项目为准。

### 2. 检查/创建文件夹

- 若项目根下不存在 `error-record` 文件夹，则新建 `error-record`。
- 若已存在，直接使用。

### 3. 确定文件名

- 使用**当天日期**，格式 `YYYY-MM-DD.md`（例如：2025-02-23.md）。
- 日期以用户所在时区或对话中「今天」为准；必要时可向用户确认日期。

### 4. 写入或追加

- 若 `error-record/YYYY-MM-DD.md` **不存在**：新建该文件，写入本次错误总结（含下面规定的结构）。
- 若该文件**已存在**（同一天已有记录）：在文件末尾**追加**新一节，用 `---` 或二级标题（如 `## 第 2 条`）与前面的记录分隔。

### 5. 总结内容结构（每条记录至少包含）

- **场景/问题**：一句话说明在做什么时出错。
- **表现**：用户或系统看到的现象（如界面无样式、lint 报错、替换失败）。
- **原因**：技术或流程上的根因（如 CSP 拦截、误用内联 style、按错误格式做替换）。
- **改正方式**：实际采用的修复步骤或代码改动要点。
- **教训**：下次应如何避免（简短条目，如「以后应先…」「不要…」）。

### 6. 格式约定

- 使用 Markdown：标题、列表、分隔线即可。
- 同一天多条：用 `---` 或 `## 第 N 条` 分隔，所有记录写在同一个 `YYYY-MM-DD.md` 中。

## 单条记录示例

```markdown
## 场景：Electron 页面内联样式不生效

- **表现**：去掉内联 style 后界面无样式。
- **原因**：file:// 下 CSP style-src 'self' 对同页 `<style>` 可能不生效。
- **改正**：将 CSS 抽到 styles.css，用 `<link href="styles.css">` 引入。
- **教训**：Electron + CSP 时优先用外部样式表，避免依赖同页 `<style>`。
```
