---
name: project-map-builder
description: 为指定目录生成或增量更新 PROJECT_MAP.md 高信噪比目录说明。Use when the user asks for 目录地图、项目地图、代码仓概览、生成/更新 PROJECT_MAP、文件夹说明. 必须先询问要扫描的文件夹，禁止默认全仓扫描。
---

# 项目目录地图构建器

为指定目录范围生成或增量更新 PROJECT_MAP.md。

## 核心规则

- **必须让用户指定扫描范围**，禁止默认全仓库扫描。
- 输出语言与用户当前一致。文件名固定：PROJECT_MAP.md。
- 若已存在 PROJECT_MAP.md → 仅做**增量更新**；若不存在 → 先确认范围再新建。

## 最少要问用户

1. 要扫描哪些文件夹？
2. 若多文件夹：合并成一个文档，还是各目录各一份？
3. 范围过大时提醒并确认。

## 工作流

**新建模式**：确认范围 → 列出文件清单 → 识别入口与关键文件（manifest、主入口、配置、存储、测试）→ 只读关键文件 → 按模板生成 PROJECT_MAP.md。不确定处标注「假设/未确认」。

**更新模式**：读取既有 PROJECT_MAP.md → 仅重扫指定范围 → 做增量补丁，不全量重写 → 添加「本次更新」小节（日期+范围+变更点）。

## 输出位置

- 单目录：该目录根下 PROJECT_MAP.md。
- 多目录：先问合并或分开；合并则项目根，分开则各目录根各一份。

## 文档结构建议

概览、作用范围、入口与运行链路、关键配置、目录与文件说明、关键模块关系、风险/遗留/不确定、本次更新（更新模式）。
